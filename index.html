<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Space Fighter Game Documentation</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f9;
            color: #333;
        }
        header {
            background-color: #333;
            color: #f4f4f9;
            text-align: center;
            width: 100%;
            padding: 10px 0px;
        }
        header h1 {
            color: #f4f4f9;;
        }
        .container {
            max-width: 1200px;
            margin: auto;
            padding: 20px;
            background: #fff;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        h1, h2, h3 {
            color: #444;
        }
        code {
            background: #f1f1f1;
            padding: 2px 4px;
            border-radius: 3px;
            line-height: 3cap;
        }
        pre {
            background: #f1f1f1;
            padding: 10px;
            border-radius: 3px;
            overflow-x: auto;
        }
        footer {
            text-align: center;
            background: #333;
            color: #fff;
            width: 100%;
            bottom: 0;
            padding: 10px 0px;
        }
        .section {
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <header >
        <h1>Space Fighter Game Documentation</h1>
    </header>

    <div class="container">
        <div class="section">
            <h2>Overview</h2>
            <p >The Space Fighter Game is an arcade-style game where players control a spaceship to dodge obstacles, collect coins, and gain lives while shooting at enemies. This Python application is developed using the <code>pygame</code> library and integrates elements such as animations and OpenCV video rendering.</p>
        </div>

        <div class="section">
            <h2>Game Features</h2>
            <ul>
                <li>Player controls for movement and shooting</li>
                <li>Dynamic obstacles and power-ups</li>
                <li>Collision detection and scoring</li>
                <li>Video background integration using OpenCV</li>
                <li>Game Over and restart functionality</li>
            </ul>
        </div>

        <div class="section">
            <h2>Code Structure</h2>
            <h3>Initialization</h3>
            <p>The game initializes with the <code>pygame.init()</code> function and sets up the display, clock, and game variables.</p>

            <h3>Key Components</h3>
            <ul>
                <li><strong>Player:</strong> The spaceship controlled by the player, defined by its position, size, and speed.</li>
                <li><strong>Obstacles:</strong> Enemies that move down the screen. Colliding with them reduces the player's lives.</li>
                <li><strong>Coins and Power-Ups:</strong> Collectibles that enhance gameplay, such as granting extra lives or points.</li>
                <li><strong>Bullets:</strong> Projectiles fired by the player to destroy obstacles.</li>
                <li><strong>Background:</strong> A dynamic video background implemented using OpenCV.</li>
            </ul>

            <pre><code>// Example: Creating and moving an obstacle
function createObstacle() {
    // Logic to avoid overlap and spawn at random positions
}

function moveObstacles() {
    // Logic to move obstacles down the screen
}
</code></pre>
        </div>

        <div class="section">
            <h2>Core Functions</h2>
            <ul>
                <li><code>create_obstacle()</code>: Creates obstacles at random positions.</li>
                <li><code>move_obstacles()</code>: Moves obstacles and removes them when they go off-screen.</li>
                <li><code>check_collision()</code>: Detects collisions between the player and obstacles.</li>
                <li><code>shoot_bullet()</code>: Fires bullets from the player's position.</li>
                <li><code>draw()</code>: Renders all game elements on the screen.</li>
                <li><code>draw_game_over()</code>: Displays the game-over screen.</li>
            </ul>
        </div>

        <div class="section">
            <h2>Game Loop</h2>
            <p>The main game logic is implemented within the <code>game_loop()</code> function. It handles user inputs, updates game elements, and checks for events like collisions or collecting power-ups.</p>

            <pre><code>
def game_loop():
    global player_x, player_y, lives, coin, life_power_up, score, obstacle_speed, min_obstacle_gap, obstacle_spawn_rate
    
    # Create initial obstacles
    create_obstacle()
    
    running = True
    game_over = False
    
    while running:
        # Set FPS (frames per second)
        clock.tick(60)
        
        # Event handling
        for event in pygame.event.get():
            if event.type == pygame.QUIT:
                running = False
                cap.release()
                pygame.quit()
            elif not game_over:
                if event.type == pygame.KEYDOWN:
                    if event.key == pygame.K_SPACE:
                        shoot_bullet()
            else:  # Game Over event handling
                if event.type == pygame.KEYDOWN:
                    if event.key == pygame.K_r:  # Restart game
                        game_over = False
                        running = True
                        lives = 3
                        score = 0
                        obstacle_speed = 5
                        obstacle_spawn_rate = 3
                        min_obstacle_gap = 60
                        obstacles.clear()
                        create_obstacle()
                    elif event.key == pygame.K_q:  # Quit game
                        running = False
                        cap.release()
                        pygame.quit()
                        
        if not game_over:
            # Move player based on user input (left , right , up , down)
            keys = pygame.key.get_pressed()
            if keys[pygame.K_LEFT] and player_x > 0:
                player_x -= player_speed
            if keys[pygame.K_RIGHT] and player_x < width - player_width:
                player_x += player_speed
            # Vertical movement
            if keys[pygame.K_UP] and player_y > 0:
                player_y -= player_speed
            if keys[pygame.K_DOWN] and player_y < height - player_height: 
                player_y += player_speed
            
            # Move obstacles, bullets, coin, and power-up
            move_obstacles()
            move_bullets()
            coin = move_coin()
            life_power_up = move_life_power_up()
            
            # Check collisions and collections
            if check_collision():
                lives -= 1  # Decrease life on collision
                if lives <= 0:
                    # running = False  # End the game if no lives are left
                    game_over = True
                else:
                    obstacles.clear()  # Clear obstacles after collision for a fresh start
            
            check_coin_collection()
            check_life_power_up_collection()
            
            # Periodically create new obstacles based on the increased difficulty
            if random.randint(1, 100) < obstacle_spawn_rate:
                create_obstacle()
            
            # Read the next frame from the video
            ret, frame = cap.read()
            if not ret:
                cap.set(cv2.CAP_PROP_POS_FRAMES, 0)  # Restart video when it ends
                continue

            # Convert the frame to a Pygame surface
            video_surface = pygame.surfarray.make_surface(frame)

            # Draw the frame and game elements
            draw(video_surface)

        # Handle Game Over
        if game_over:
            draw_game_over()

</code></pre>
        </div>

        <div class="section">
            <h2>Dependencies</h2>
            <ul>
                <li><a href="https://www.pygame.org/">Pygame</a>: Library for graphics and input handling.</li>
                <li><a href="https://opencv.org/">OpenCV</a>: For video playback and manipulation.</li>
            </ul>
        </div>

        <div class="section">
            <h2>How to Run</h2>
            <ol>
                <li>Install the required libraries: <code>pip install pygame opencv-python</code></li>
                <li>Ensure the assets (images, video) are in the specified paths.</li>
                <li>Run the script: <code>python game.py</code></li>
            </ol>
        </div>

        <div class="section">
            <h2>Future Improvements</h2>
            <ul>
                <li>Add more power-ups and enemy types.</li>
                <li>Introduce levels with increasing difficulty.</li>
                <li>Optimize collision detection for better performance.</li>
            </ul>
        </div>
    </div>

    <footer>
        <p>&copy; 2024 Space Fighter Game Documentation</p>
    </footer>
</body>
</html>
